# Contao Component Style Manager
[![maintained](https://img.shields.io/badge/oveleon-maintained-83aa0e?style=flat-square&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAUCAYAAABvVQZ0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA/xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjVEMjA4OTI0OTNCRkRCMTE5MTRBODU5MEQzMTUwOEM4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM5MjZBNjQzMzZFQjExRUFBMTdBQkNFQTAxNjg2RDI4IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM5MjZBNjQyMzZFQjExRUFBMTdBQkNFQTAxNjg2RDI4IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIElsbHVzdHJhdG9yIENTNiAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0idXVpZDplMDhkZDhmZC1mOTA4LTQ5YzItYWMwZC00OGE3YTI4ODc2YWEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTA2RDhGOENERUQxRTgxMTgyMjVBMzBGQ0NBNjE4RUQiLz4gPGRjOnRpdGxlPiA8cmRmOkFsdD4gPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5Mb2dvX292ZWxlb25fWmVpY2hlbl9yejwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+P8iBTQAAAbFJREFUeNqU08srRFEcB/BromGGaJRHKSIaYfIm7JRSsvHIyuM/wMorNeEfUMqKnbKwU2TBwpSUSWYWFmSBDKWmWcgwcX2Pvrc5HXfuXL/6zD2P3z2Puedouq5rilG40JPxAuUmeX84tGTkwyXsghOWYQmKoFazExzVDXFIgEeazcPV9TCnzGplRiHMl7KgCWYghy9vQAasMEfkTqQarJ9JFWw0YlhJFv2rUv8tdKiDhTib0eiHQyhOsR2xyjlp0BF5MBELdr6WohE++X6raBOz6PwWCfiCOLzDN8sRGICYyfdrgBA8Q2kmfnzQJirghlw+XZANUQ5qFmHY52R9/9lWCXjBpbRPcaubDhtHsRoOuN1reAO/1H/PpzfdaqrggzOLK7YFD6zPMqeL9at0gwWZuKa0i3hkuZf1E6tteqEZnmCRbZVwxPIOn3V83litaogzbrPuhDOIwbyUd8q8SavBOpl0rnxROadFugkFVoOJAx1h4rRJvw9e2b9u3ACrY9ENAZaD/L/E0aiHMbbfQc3v7bFxWAchqptHAAqN3HQrM0JcsXFohzzexWPYk5N+BBgAix5VyvzRZbwAAAAASUVORK5CYII=)](https://www.oveleon.de)
[![license](https://img.shields.io/github/license/oveleon/contao-component-style-manager?color=83aa0e&style=flat-square)](https://github.com/oveleon/contao-component-style-manager/blob/master/LICENSE)
[![stable](https://img.shields.io/badge/stable-master-83aa0e?style=flat-square)](https://github.com/oveleon/contao-component-style-manager/tree/master)
[![unstable](https://img.shields.io/badge/unstable-develop-F38041?style=flat-square)](https://github.com/oveleon/contao-component-style-manager/tree/develop)
[![downloads](https://img.shields.io/packagist/dt/oveleon/contao-component-style-manager?color=0A7BBC&style=flat-square)](https://packagist.org/packages/oveleon/contao-component-style-manager)

Allows you to easily manage your own CSS classes as groups provided in layouts, pages, articles, modules, news, events, forms, form elements and content elements.

This plugin is designed to simplify theme customizations without the need of manually adding classes or creating new layouts.

## Overview
- Many possibilities of use (grids, animations, content properties, ...)
- Clear representation in the backend
- Categories and Groups 
    - Combine and output as tabs [![new](https://img.shields.io/badge/-new-brightgreen?style=flat-square)](#manage-categories)
- Passing variables to the template [![new](https://img.shields.io/badge/-new-brightgreen?style=flat-square)](#passing-style-group-variables-to-a-template)
    - Formatting output using predefined methods or your own [![new](https://img.shields.io/badge/-new-brightgreen?style=flat-square)](#passing-style-group-variables-to-a-template)
- Available for
    - Layouts
    - Pages
    - Articles
    - Modules
    - Content-Elements
    - Forms
    - Form-Fields
    - News [![new](https://img.shields.io/badge/-new-brightgreen?style=flat-square)](#contao-component-style-manager)
    - Events [![new](https://img.shields.io/badge/-new-brightgreen?style=flat-square)](#contao-component-style-manager)
- Third-Party plugin support
    - Rocksolid Custom Elements 


## Install
```
$ composer require oveleon/contao-component-style-manager
```

## Manage Categories:
#### Fields:
- `Title`: The title of the category, which is displayed above the defined style groups in the backend
- `Idenfifier`: A unique value for retrieving the classes in the template
- `Group-Idenfifier`: In this field you can specify an alias that combines categories with the same alias and displays them as tabs in the backend.
- `Sort-Index`: This field is used to determine the order of the categories in the backend

##### Example backend view of combined categories using `Group-Idenfifier`:
![Manage Categories: Image 3](https://www.oveleon.de/share/github-assets/contao-component-style-manager/2.0/combined-groups.png)

## Manage CSS-Groups:
#### Fields:
- `Alias`: Define an alias with which the group can be accessed. This is only required for passing on to the template.
- `Add search field`: Use of chosen for a search field within the select box
- `Use as template variable`: This field declares whether this group is set in the class attribute of the corresponding element or passed to the template.
- `CSS class`: To further customize the display of the backend fields, you can enter a selection of predefined CSS classes. (long, clr, seperator)
> All other fields should be self-explanatory

##### Example css group:
![Manage Groups: Image 1](https://www.oveleon.de/share/github-assets/contao-component-style-manager/2.0/groups-edit.png)

## Passing css group variables to a template:
If the checkbox "Use as template variable" is set, these are not automatically passed to the class of the corresponding element but are available in the template.
To access the variables, we can access the corresponding class collection via the `styleManager` object.

#### There are two ways to receive the values:
- **get**: Return selected CSS classes of a category or a specific group
    - Parameter:
        - `identifier: string`: Category identifier
        - `groups: null|array` (optional): Group aliases
- **prepare** + **format**: Different from the get method, you can specify your own output format and a predefined or custom method to validate the output
    - `prepare`-Parameter: 
        - `identifier: string`: Category identifier
        - `groups: null|array` (optional): Group aliases
    - `format`-Parameter:
        - `format: string`: The format parameter must contain a format string valid for `sprintf` (PHP: [sprintf](https://www.php.net/manual/de/function.sprintf.php))).
        - `method: string` (optional): Name of Method
        
#### Predefined methods
- `json`: Returns a JSON object using the alias and value (e.g. `{"alias1":"my-class-1","alias2":"my-class-2"}`)

#### Register your own method per Hook
To set up a custom method for validating the values, the hook `styleManagerFormatMethod` can be registered.

<br/>

> Let us know if you know of any other useful methods that could be included in the standard ðŸ‘‹

#### Examples:
##### Using `get`-Method
```php
// Return of all selected CSS classes of a category
$this->styleManager->get('myCategoryIdentifier');

// Return of all selected CSS classes in specific groups of a category
$this->styleManager->get('myCategoryIdentifier', ['alias1', 'alias2']);
```

##### Using `prepare` + `format`-Method
```php
// Return of all selected CSS classes of a category with class attribute
$this->styleManager->prepare('myCategoryIdentifier')->format('class="%s"');

// Often additional classes are appended to an existing class attribute. In this case, unnecessary if-else statements can be avoided.
$this->styleManager->prepare('myCategoryIdentifier')->format(' %s');

// Return of all selected CSS classes in specific groups of a category as json with data attribute
$this->styleManager->prepare('myCategoryIdentifier', ['alias1'])->format("data-slider='%s'", 'json');
```

##### Example of use
```
<div class="<?=$this->styleManager->get('myCategoryIdentifier')?>">...</div>
  or
<div <?=$this->styleManager->prepare('myCategoryIdentifier')->format("class="%s")?>>...</div>

<div class="my-class-1<?=$this->styleManager->prepare('myCategoryIdentifier')->format(' %s')?>">...</div>

<div data-slider="<?=$this->styleManager->prepare('myCategoryIdentifier', ['slider-alias'])->format("data-slider='%s'", 'json')?>">...</div>
```

##### Backend view
![Passing Variables: Image 1](https://www.oveleon.de/share/github-assets/contao-component-style-manager/2.0/template-vars-list.png)

## Support Rocksolid Custom Elements
see: [Rocksolid Custom Elements](https://github.com/madeyourday/contao-rocksolid-custom-elements)

Use the callback function `onloadCallback` in your custom element configuration and reference the following function:
```
 'onloadCallback' => array(
      array('Oveleon\ContaoComponentStyleManager\Support', 'extendRockSolidCustomElementsPalettes')
  )
```
